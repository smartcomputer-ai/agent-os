[
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradePc@1",
    "type": {
      "variant": {
        "Idle": { "unit": {} },
        "Fetching": { "unit": {} },
        "Completed": { "unit": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradeState@1",
    "type": {
      "record": {
        "pc": { "ref": "demo/SafeUpgradePc@1" },
        "next_request_id": { "nat": {} },
        "pending_request": { "option": { "nat": {} } },
        "primary_status": { "option": { "int": {} } },
        "follow_status": { "option": { "int": {} } },
        "requests_observed": { "nat": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradeStart@1",
    "type": { "record": { "url": { "text": {} } } }
  },
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradeNotifyComplete@1",
    "type": {
      "record": {
        "primary_status": { "int": {} },
        "follow_status": { "int": {} },
        "request_count": { "nat": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradeEvent@1",
    "type": {
      "variant": {
        "Start": { "ref": "demo/SafeUpgradeStart@1" },
        "NotifyComplete": { "ref": "demo/SafeUpgradeNotifyComplete@1" }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/UpgradeFetchRequest@1",
    "type": { "record": { "request_id": { "nat": {} }, "url": { "text": {} } } }
  },
  {
    "$kind": "defschema",
    "name": "demo/SafeUpgradeResult@1",
    "type": {
      "record": {
        "primary_status": { "int": {} },
        "follow_status": { "int": {} }
      }
    }
  }
]
