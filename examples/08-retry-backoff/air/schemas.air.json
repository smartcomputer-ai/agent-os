[
  {
    "$kind": "defschema",
    "name": "demo/StartWork@1",
    "type": {
      "record": {
        "req_id": { "text": {} },
        "payload": { "text": {} },
        "max_attempts": { "nat": {} },
        "base_delay_ms": { "nat": {} },
        "now_ns": { "nat": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkRequested@1",
    "type": {
      "record": {
        "req_id": { "text": {} },
        "payload": { "text": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkOk@1",
    "type": {
      "record": {
        "req_id": { "text": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkErr@1",
    "type": {
      "record": {
        "req_id": { "text": {} },
        "transient": { "bool": {} },
        "message": { "text": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/RetryState@1",
    "type": {
      "record": {
        "pc": { "text": {} },
        "attempt": { "nat": {} },
        "max_attempts": { "nat": {} },
        "base_delay_ms": { "nat": {} },
        "anchor_ns": { "nat": {} },
        "payload": { "text": {} },
        "req_id": { "text": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/RetryEvent@1",
    "type": {
      "variant": {
        "start": { "ref": "demo/StartWork@1" },
        "ok": { "ref": "demo/WorkOk@1" },
        "err": { "ref": "demo/WorkErr@1" },
        "timer": { "ref": "sys/TimerFired@1" }
      }
    }
  }
]
