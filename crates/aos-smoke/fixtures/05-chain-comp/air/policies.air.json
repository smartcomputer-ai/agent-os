[
  {
    "$kind": "defpolicy",
    "name": "demo/http-chain-policy@1",
    "rules": [
      {
        "when": {
          "effect_kind": "http.request",
          "origin_kind": "plan",
          "origin_name": "demo/charge_plan@1"
        },
        "decision": "allow"
      },
      {
        "when": {
          "effect_kind": "http.request",
          "origin_kind": "plan",
          "origin_name": "demo/reserve_plan@1"
        },
        "decision": "allow"
      },
      {
        "when": {
          "effect_kind": "http.request",
          "origin_kind": "plan",
          "origin_name": "demo/notify_plan@1"
        },
        "decision": "allow"
      },
      {
        "when": {
          "effect_kind": "http.request",
          "origin_kind": "plan",
          "origin_name": "demo/refund_plan@1"
        },
        "decision": "allow"
      },
      { "when": {}, "decision": "deny" }
    ]
  }
]
