[
  {
    "$kind": "defschema",
    "name": "demo/FlowRequest@1",
    "type": {
      "record": {
        "request_id": { "nat": {} },
        "approved": { "bool": {} },
        "worker_count": { "nat": {} },
        "completed_workers": { "nat": {} },
        "urls": { "list": { "text": {} } },
        "done": { "bool": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/FlowState@1",
    "type": {
      "record": {
        "completed_count": { "nat": {} },
        "last_request_id": { "option": { "nat": {} } },
        "last_worker_count": { "option": { "nat": {} } },
        "requests": { "list": { "ref": "demo/FlowRequest@1" } },
        "pending_by_hash": {
          "map": {
            "key": { "text": {} },
            "value": { "nat": {} }
          }
        }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/RuntimeHardeningStart@1",
    "type": {
      "record": {
        "request_id": { "nat": {} },
        "urls": { "list": { "text": {} } }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/ApprovalEvent@1",
    "type": {
      "record": {
        "request_id": { "nat": {} },
        "approved": { "bool": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/RuntimeHardeningEvent@1",
    "type": {
      "variant": {
        "Start": { "ref": "demo/RuntimeHardeningStart@1" },
        "Approval": { "ref": "demo/ApprovalEvent@1" },
        "Receipt": { "ref": "sys/EffectReceiptEnvelope@1" }
      }
    }
  }
]
