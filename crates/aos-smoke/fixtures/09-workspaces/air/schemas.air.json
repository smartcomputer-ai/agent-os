[
  {
    "$kind": "defschema",
    "name": "demo/WorkspaceSummary@1",
    "type": {
      "record": {
        "version": { "option": { "nat": {} } },
        "root_hash": { "hash": {} },
        "entry_count": { "nat": {} },
        "diff_count": { "nat": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkspaceStep@1",
    "type": {
      "variant": {
        "Resolving": { "unit": {} },
        "CreatingEmptyRoot": { "unit": {} },
        "WritingMarker": { "unit": {} },
        "WritingReadme": { "unit": {} },
        "WritingData": { "unit": {} },
        "Listing": { "unit": {} },
        "WritingReadmeUpdate": { "unit": {} },
        "Diffing": { "unit": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkspaceState@1",
    "type": {
      "record": {
        "workspaces": {
          "map": {
            "key": { "text": {} },
            "value": { "ref": "demo/WorkspaceSummary@1" }
          }
        },
        "pending_workspaces": { "list": { "text": {} } },
        "active_workspace": { "option": { "text": {} } },
        "active_owner": { "option": { "text": {} } },
        "active_step": { "option": { "ref": "demo/WorkspaceStep@1" } },
        "active_expected_head": { "option": { "nat": {} } },
        "active_base_root": { "option": { "hash": {} } },
        "active_current_root": { "option": { "hash": {} } },
        "active_entry_count": { "option": { "nat": {} } }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkspaceStart@1",
    "type": {
      "record": {
        "workspaces": { "list": { "text": {} } },
        "owner": { "text": {} }
      }
    }
  },
  {
    "$kind": "defschema",
    "name": "demo/WorkspaceEvent@1",
    "type": {
      "variant": {
        "Start": { "ref": "demo/WorkspaceStart@1" },
        "Receipt": { "ref": "sys/EffectReceiptEnvelope@1" }
      }
    }
  }
]
